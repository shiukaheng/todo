{"openapi":"3.1.0","info":{"title":"DAG Todo API","description":"Task management with DAG dependencies and real-time updates","version":"0.1.0"},"paths":{"/api/tasks":{"get":{"summary":"List Tasks","description":"List all tasks with computed properties.","operationId":"list_tasks_api_tasks_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskListOut"}}}}}},"post":{"summary":"Add Task","description":"Create a new task.","operationId":"add_task_api_tasks_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/tasks/{task_id}":{"patch":{"summary":"Set Task","description":"Update a task's properties.","operationId":"set_task_api_tasks__task_id__patch","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"string","title":"Task Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OperationResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"summary":"Remove Task","description":"Delete a task and its edges.","operationId":"remove_task_api_tasks__task_id__delete","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"string","title":"Task Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OperationResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/tasks/{task_id}/rename":{"post":{"summary":"Rename Task","description":"Rename a task (change its ID).","operationId":"rename_task_api_tasks__task_id__rename_post","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"string","title":"Task Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RenameRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OperationResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/links":{"post":{"summary":"Link Tasks","description":"Create a dependency: from_id depends on to_id.","operationId":"link_tasks_api_links_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LinkRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OperationResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"summary":"Unlink Tasks","description":"Remove a dependency.","operationId":"unlink_tasks_api_links_delete","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LinkRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OperationResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/tasks/subscribe":{"get":{"summary":"Subscribe Tasks","description":"Subscribe to real-time task updates via SSE.","operationId":"subscribe_tasks_api_tasks_subscribe_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/init":{"post":{"summary":"Init Db","description":"Initialize the database schema.","operationId":"init_db_api_init_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OperationResult"}}}}}}},"/health":{"get":{"summary":"Health","description":"Health check endpoint.","operationId":"health_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"EnrichedTaskOut":{"properties":{"task":{"$ref":"#/components/schemas/TaskOut"},"direct_deps":{"items":{"type":"string"},"type":"array","title":"Direct Deps"},"calculated_completed":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Calculated Completed"},"calculated_due":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Calculated Due"},"deps_clear":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Deps Clear"}},"type":"object","required":["task","direct_deps","calculated_completed","calculated_due","deps_clear"],"title":"EnrichedTaskOut","description":"Enriched task response with computed properties."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"LinkRequest":{"properties":{"from_id":{"type":"string","title":"From Id"},"to_id":{"type":"string","title":"To Id"}},"type":"object","required":["from_id","to_id"],"title":"LinkRequest","description":"Link/unlink request."},"OperationResult":{"properties":{"success":{"type":"boolean","title":"Success"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"}},"type":"object","required":["success"],"title":"OperationResult","description":"Generic operation result."},"RenameRequest":{"properties":{"new_id":{"type":"string","title":"New Id"}},"type":"object","required":["new_id"],"title":"RenameRequest","description":"Rename request."},"TaskCreate":{"properties":{"text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Text"},"completed":{"type":"boolean","title":"Completed","default":false},"inferred":{"type":"boolean","title":"Inferred","default":false},"due":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Due"},"id":{"type":"string","title":"Id"},"depends":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Depends"},"blocks":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Blocks"}},"type":"object","required":["id"],"title":"TaskCreate","description":"Task creation request."},"TaskListOut":{"properties":{"tasks":{"items":{"$ref":"#/components/schemas/EnrichedTaskOut"},"type":"array","title":"Tasks"},"has_cycles":{"type":"boolean","title":"Has Cycles"}},"type":"object","required":["tasks","has_cycles"],"title":"TaskListOut","description":"Task list response."},"TaskOut":{"properties":{"id":{"type":"string","title":"Id"},"text":{"type":"string","title":"Text"},"completed":{"type":"boolean","title":"Completed"},"inferred":{"type":"boolean","title":"Inferred"},"due":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Due"},"created_at":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Created At"},"updated_at":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Updated At"}},"type":"object","required":["id","text","completed","inferred","due","created_at","updated_at"],"title":"TaskOut","description":"Task response."},"TaskUpdate":{"properties":{"text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Text"},"completed":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Completed"},"inferred":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Inferred"},"due":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Due"}},"type":"object","title":"TaskUpdate","description":"Task update request."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}